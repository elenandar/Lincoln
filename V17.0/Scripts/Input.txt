// Lincoln v17 - Input Script (Phase 1: Infrastructure)
// Processes player input before it goes to the AI
// Library.txt has already executed, LC is available

const modifier = (text) => {
    try {
        // Detect and process commands using substring search
        var command = LC.CommandsRegistry.detect(text);
        if (command) {
            var args = LC.CommandsRegistry.parse(text, command);
            var output = LC.CommandsRegistry.execute(command, args);
            if (output) {
                state.lincoln.commandOutput = output;
                text = " ";
            }
        }
        
        return { text: text };
    } catch (e) {
        console.log("Input modifier error:", e);
        return { text: text };
    }
};
modifier(text);
