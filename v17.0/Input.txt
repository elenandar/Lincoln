// === PROJECT LINCOLN v17 - INPUT ===
// Version: 17.0.5 (Stability Hotfix)

const modifier = (text) => {
  const LC = state.shared.LC;
  if (typeof LC === 'undefined') {
    return;
  }

  const L = LC.lcInit('Input');
  const rawText = LC.Tools.toStr(text).trim();

  if (rawText.startsWith('/')) {
    L.currentAction.type = 'command';
    const commandName = rawText.split(' ')[0].toLowerCase();
    
    if (LC.CommandsRegistry.has(commandName)) {
      LC.CommandsRegistry.get(commandName).handler(rawText);
    } else {
      LC.replyStop(`Неизвестная команда: ${commandName}`);
    }
    // Для команд мы очищаем ввод, чтобы он не шел к ИИ
    text = "";
  }
};

// Вызываем функцию, как указано в документации lincoln-dev
modifier(text);
